demo 04_test
save 04_test
settings tas_strafe_vectorial 1; tas_strafe_use_tracing 0
playspeed 16

vars

frames
// General strafing stuff 
s01-------|------|------|0|-|100|_y_spt_anglesetspeed 5
s01-------|------|------|48|10|30|
s01-------|------|---1--|48|10|5|
----------|------|------|25|-33|30|
----------|------|------|-|-|100|
----------|------|------|25.44|-29.52|1|_y_spt_anglesetspeed 360 
----------|------|---1--|-|-|1|tas_force_onground 1;
----------|fl----|------|-|-|20|
----------|------|------|0|0|20|
s01-------|------|------|0|0|15|
s01-------|------|-d----|0|0|27|
s01-j-----|------|-d----|0|0|1|tas_force_onground 0
s01-j-----|------|-d----|0|0|40|
s01-j-----|------|-du---|0|0|29|
----------|---b--|------|0|0|50|
----------|------|------|90|20|10|_y_spt_anglesetspeed 10
----------|------|------|180|20|90|
----------|------|--u---|180|20|1|

// Testing movement keys and use/jump/duck
----------|f-----|-d----|-|-|5|
----------|-l----|-d----|-|-|5|
----------|--r---|-d----|-|-|5|
----------|---b--|-d----|-|-|5|
----------|------|------|-|-|5|
----------|f-----|------|-|-|10|
----------|f-----|jd----|-|45|15|
----------|f-----|jd----|-|-|15|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|
----------|f-----|-d----|-|-|1|
----------|f-----|jdu---|-|-|1|

// Giving myself the upgraded portal gun to test secondary fire
----------|f-----|-d----|-|-|1|upgrade_portalgun; tas_force_onground 1
s01-------|------|------|180|10|100|
s01-------|------|----2-|180|10|10|
----------|------|------|-|-|10|

// Testing offsets, this should not snap
----------|---b--|------|-|-|30|tas_strafe_vectorial_offset 11; tas_strafe_vectorial_increment 11
s01-------|------|------|0|-|30|
s01-------|------|------|0|-|1|tas_strafe_vectorial_offset 0
s01-------|------|------|0|-|5|

// This should snap, going from 0 to -171, snap is set to 170
s01-------|------|------|0|-|1|tas_strafe_vectorial_offset -171; tas_strafe_vectorial_increment 1
s01-------|------|------|0|-|5|
s01-------|------|------|45|-|35|
----------|------|------|-|-89|20|
----------|------|------|-|89|20|

// Yawspeed/pitchspeed testing
----------|------|------|-|-|20|_y_spt_yawspeed 5; _y_spt_pitchspeed -3.5
----------|------|------|-|-|20|_y_spt_yawspeed -4; _y_spt_pitchspeed 2.5
----------|------|------|-|-|1|_y_spt_yawspeed 0; _y_spt_pitchspeed 0

// This should do nothing, setpitch/yaw are cancelled
----------|------|------|-|-|1|_y_spt_setyaw 33; _y_spt_setpitch 33; _y_spt_resetpitchyaw

// Testing non-vec strafing
----------|------|------|-|-|1|tas_strafe_vectorial 0
s01-------|------|-d----|25|-|27|
s01-j-----|------|-d----|25|-|50|
s01-------|------|------|-155|-|20|

// Testing jump override
s11-------|------|------|0|0|20|tas_strafe_allow_jump_override 1; tas_strafe_vectorial 1; tas_strafe_vectorial_increment 5; tas_strafe_vectorial_offset 0
s01-------|------|-d----|180|-|27|

// Jump override on = this should cancel
s01-j-----|------|-d----|180|-|1|_y_spt_setyaw 180
s01-------|------|-d----|180|-|30|
----------|------|------|0|-|30|tas_strafe_allow_jump_override 0
s01-------|------|-d----|0|-|27|

// Jump override off = this should go through
s01-j-----|------|-d----|0|-|1|_y_spt_setyaw 0
s01-------|------|-d----|0|-|60|
----------|------|------|0|-|1|
----------|------|------|0|-|1|disconnect